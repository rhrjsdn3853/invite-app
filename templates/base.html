<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<title>{{ event.title }}</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  :root{
    /* 색상 대비 + Apple 감성 */
    --bg1:#f5f6f8; --bg2:#e8ecf2;
    --paper:#ffffff;
    --ink:#1a1a1a;      /* 본문 글씨 - 진하게 */
    --sub:#555;         /* 보조 텍스트 - 짙은 회색 */
    --line:#e5e5ea;
    --pri:#007aff;      /* Apple 블루 */
    --pri2:#00c896;
    --radius:28px; 
    --shadow:0 12px 32px rgba(0,0,0,.08);
  }
  @media(prefers-color-scheme:dark){
    :root{
      --bg1:#0d0f12; --bg2:#050607;
      --paper:#111214;
      --ink:#f5f5f7;
      --sub:#bdbdc2;
      --line:#2c2c2e;
      --shadow:0 12px 36px rgba(0,0,0,.5);
    }
  }

  *{box-sizing:border-box}
  html,body{height:100%; scroll-behavior:smooth;}
  body{
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","Noto Sans KR",system-ui,sans-serif;
    color:var(--ink);
    -webkit-font-smoothing:antialiased;
    background: linear-gradient(160deg,var(--bg1),var(--bg2));
    transition: background .6s ease;
  }

  .stage{
    min-height:100vh;
    display:flex; align-items:center; justify-content:center;
    padding: clamp(20px,4vw,56px) 16px;
  }

  .card{
    width:min(780px,96vw);
    background:var(--paper);
    border:1px solid var(--line);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
    padding: clamp(20px,4vw,44px);
    overflow:hidden; position:relative;
  }

  /* ===== HERO ===== */
  .hero-block{
    text-align:center;
    transform-origin: top center;
    transition: transform .5s ease, opacity .5s ease;
    min-height: calc(100vh - 240px);
    display:flex; flex-direction:column; justify-content:center;
  }

  .title{
    margin:0 0 .4rem;
    font-weight:800; letter-spacing:-.3px;
    font-size: clamp(28px,4.8vw,44px);
    background: linear-gradient(90deg,var(--pri),var(--pri2));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
  }
  .subtitle{ margin:.2rem 0 1.1rem; color:var(--sub); font-weight:600 }

  .kv{
    display:inline-grid;
    grid-template-columns:auto 1fr;
    gap:.4rem 1rem;
    text-align:left;
    line-height:1.9;
    font-size:1.05rem;
    margin:0 auto 1.2rem;
    color:var(--ink);
  }
  .kv .i{opacity:.7}
  .div{ height:1px; background:var(--line); margin:1.2rem 0 1rem }
  .desc{ font-size:1.06rem; line-height:1.8; color:var(--ink); margin-bottom:1rem }

  .countdown{
    display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin:.4rem 0 1.1rem;
  }
  .cd{
    background:#fff;
    border:1px solid var(--line);
    border-radius:12px;
    padding:12px 14px;
    min-width:76px;
    text-align:center;
  }
  .cd-val{ display:block; font-weight:800; font-size:1.6rem; color:#111 }
  .cd-lab{ display:block; font-size:.86rem; color:var(--sub) }

  .actions{
    display:flex; gap:10px; flex-wrap:wrap; justify-content:center;
  }

  /* --- 버튼 스타일 --- */
  .btn{
    text-decoration:none;
    font-weight:700;
    padding:12px 18px;
    border-radius:12px;
    transition:.2s;
    border:1px solid var(--line);
    background:#f9f9fb;
    color:#1a1a1a;
    box-shadow:0 2px 6px rgba(0,0,0,.05);
  }
  .btn.primary{
    background:linear-gradient(135deg,var(--pri),var(--pri2));
    border:none;
    color:#fff;
    box-shadow:0 4px 12px rgba(0,122,255,.2);
  }
  .btn:hover{
    transform:translateY(-2px);
    filter:brightness(.97);
  }

  /* ===== Letter ===== */
  .letter-block{
    margin-top: clamp(18px,2.6vw,26px);
    border-top: 1px solid var(--line);
    padding-top: clamp(14px,2.2vw,22px);
    display:none;
    max-height:0;
    opacity:0;
    transform:translateY(10px);
    transition:max-height .7s ease,opacity .45s ease,transform .45s ease;
  }

  .letter-card{
    background:#fff;
    border:1px solid var(--line);
    border-radius:16px;
    box-shadow:0 10px 28px rgba(0,0,0,.04);
    padding:clamp(18px,2.4vw,28px);
  }

  .letter-title{
    margin:0 0 10px;
    font-size:.9rem;
    color:var(--sub);
    font-weight:700;
    letter-spacing:.12em;
    text-transform:uppercase;
  }

  .letter-title + .hairline{
    height:1px;
    background:var(--line);
    margin:10px 0 14px;
  }

  .letter-body{
    font-size:1.06rem;
    line-height:1.9;
    color:var(--ink);
  }
  .letter-body p{margin:0 0 .9rem;}
  .letter-body p:last-of-type{color:var(--sub);}

  .line{opacity:0;transform:translateY(6px);transition:.36s ease;}

  body.open{background:linear-gradient(160deg,#ffffff,#f2f4f8);}
  body.open .hero-block{transform:scale(.96);opacity:.96;}
  body.open .letter-block{display:block;opacity:1;transform:none;}

  @media(max-width:480px){
    .kv{grid-template-columns:1.2rem 1fr;gap:.2rem .6rem;}
    .btn{font-size:.95rem;padding:11px 16px;}
    .letter-body{font-size:1rem;line-height:1.8;}
  }
</style>
</head>
<body>

  <section class="stage">
    <article class="card">
      {% block content %}{% endblock %}
    </article>
  </section>

<script>
  const letterBlock=document.getElementById('letterBlock');
  const heroBlock=document.querySelector('.hero-block');

  const openLetter=()=>{
    if(document.body.classList.contains('open'))return;
    document.body.classList.add('open');
    requestAnimationFrame(()=>{
      letterBlock.style.maxHeight=letterBlock.scrollHeight+'px';
      document.querySelectorAll('#letterBody .line').forEach((el,i)=>{
        el.style.transitionDelay=(i*40)+'ms';
        el.style.opacity=1;
        el.style.transform='none';
      });
    });
  };

  const io=new IntersectionObserver((entries)=>{
    entries.forEach(entry=>{
      if(entry.isIntersecting){openLetter();io.disconnect();}
    });
  },{root:null,threshold:0.05,rootMargin:"-42% 0px -42% 0px"});
  io.observe(heroBlock);

  window.addEventListener('resize',()=>{
    if(document.body.classList.contains('open')){
      letterBlock.style.maxHeight=letterBlock.scrollHeight+'px';
    }
  });
</script>

</body>
</html>
