<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<title>{{ event.title }}</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="color-scheme" content="light dark" />
<style>
/* ================== THEME TOKENS ================== */
:root{
  /* brand */
  --pri:#007aff; --pri2:#00c896; --accent:#34c759; --rose:#ff375f;
  /* surfaces */
  --bg1:#eef3f9; --bg2:#e5edf7; --paper:#ffffff;
  /* text */
  --ink:#0f1113; --sub:#5a5f66; --muted:#8c9199;
  /* lines & shadows */
  --line:#e5e7eb; --radius:28px; --shadow:0 16px 42px rgba(0,0,0,.12);
  /* tennis */
  --ball:#ffe84a; --ball-d:#d4c536; --court:#1e7f9f; --net:#d0d6e2;
}
@media(prefers-color-scheme:dark){
  :root{
    --bg1:#0b1014; --bg2:#05080b; --paper:#0f1216;
    --ink:#f4f7fb; --sub:#b7bcc3; --muted:#8f96a1;
    --line:#262b32; --shadow:0 20px 60px rgba(0,0,0,.6);
    --ball:#ffea63; --ball-d:#c7b83e; --court:#17607b; --net:#2e3540;
  }
}

/* reset & base */
*{box-sizing:border-box} html,body{height:100%}
html{scroll-behavior:smooth}
body{
  margin:0; font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","Noto Sans KR",system-ui,sans-serif;
  color:var(--ink); -webkit-font-smoothing:antialiased;
  background:
    radial-gradient(1200px 600px at 10% -10%, rgba(52,199,89,.10), transparent 60%),
    radial-gradient(1200px 600px at 90% 0%, rgba(0,122,255,.12), transparent 60%),
    linear-gradient(160deg,var(--bg1),var(--bg2));
  overflow-x:hidden; transition:background .6s ease,color .3s ease;
}

/* ===== BACKGROUND SYSTEM: wave + court grid + stars ===== */
.bg-waves, .bg-stars {position:fixed; inset:0; pointer-events:none; z-index:-2}
.bg-waves svg{width:100%; height:100%; opacity:.45; filter:blur(1px)}
.bg-stars{background-image:
  radial-gradient(2px 2px at 10% 20%, rgba(255,255,255,.28) 40%, transparent 41%),
  radial-gradient(2px 2px at 70% 40%, rgba(255,255,255,.25) 40%, transparent 41%),
  radial-gradient(2px 2px at 30% 80%, rgba(255,255,255,.20) 40%, transparent 41%);
  background-repeat:no-repeat; z-index:-3; opacity:.35; mix-blend-mode:screen}

/* subtle court grid */
body::before{
  content:""; position:fixed; inset:-1px;
  background:
    linear-gradient(to right, var(--net) 1px, transparent 1px) 0 0/ 56px 56px,
    linear-gradient(to bottom, var(--net) 1px, transparent 1px) 0 0/ 56px 56px;
  opacity:.18; pointer-events:none; mix-blend-mode:soft-light; z-index:-1;
}

/* ===== STAGE / CARD ===== */
.stage{min-height:100vh; display:flex; align-items:center; justify-content:center; padding:clamp(22px,5vw,64px) 16px; position:relative}
.card{
  width:min(980px,96vw); position:relative; overflow:hidden;
  background:linear-gradient(180deg, var(--paper), color-mix(in srgb, var(--paper) 92%, transparent));
  border:1px solid var(--line); border-radius:var(--radius); box-shadow:var(--shadow);
  padding:clamp(22px,4vw,48px);
}

/* ===== CARD DECOS: gradient border & inner glow ===== */
.card::before{
  content:""; position:absolute; inset:-1px; border-radius:calc(var(--radius) + 1px);
  padding:1px; background:linear-gradient(135deg, rgba(0,122,255,.35), rgba(0,200,150,.35), rgba(255,56,94,.25));
  -webkit-mask:linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0); -webkit-mask-composite: xor; mask-composite: exclude;
  pointer-events:none;
}
.card::after{
  content:""; position:absolute; inset:0; border-radius:inherit; pointer-events:none;
  box-shadow:inset 0 1px 0 rgba(255,255,255,.06);
}

/* ===== CROSS RACKETS CREST & RIBBON ===== */
.ribbon{display:flex; align-items:center; justify-content:center; gap:14px; margin:2px 0 18px; color:var(--sub); font-weight:800; letter-spacing:.08em; text-transform:uppercase; font-size:.9rem}
.ribbon:before,.ribbon:after{content:""; flex:1; height:1px; background:linear-gradient(90deg, transparent, var(--line), transparent)}
.crest{ width:60px; height:60px; border-radius:50%; display:grid; place-items:center;
  background:radial-gradient(circle at 35% 30%, rgba(255,255,255,.7), transparent 45%), linear-gradient(135deg, #dbe7ff, #e7fff1);
  border:1px solid var(--line); box-shadow:0 8px 22px rgba(0,0,0,.08)}
.crest svg{opacity:.9; filter:drop-shadow(0 2px 4px rgba(0,0,0,.1))}

/* ===== HERO ===== */
.hero-block{text-align:center; transform-origin:top center; transition:transform .5s ease, opacity .5s ease;
  min-height:calc(100vh - 260px); display:flex; flex-direction:column; justify-content:center}
.title{margin:.2rem 0 .7rem; font-weight:900; letter-spacing:-.3px; font-size:clamp(32px,5.6vw,56px);
  background:linear-gradient(90deg,var(--pri),var(--pri2)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; text-shadow:0 6px 20px color-mix(in srgb, var(--pri) 18%, transparent)}
.subtitle{margin:.2rem 0 1.1rem; color:var(--sub); font-weight:700}
.kv{display:inline-grid; grid-template-columns:auto 1fr; gap:.55rem 1.2rem; text-align:left; line-height:1.95; font-size:1.07rem; margin:0 auto 1.25rem; color:var(--ink)}
.kv .i{opacity:.85}
.div{height:1px; background:var(--line); margin:1.3rem 0 1.1rem}
.desc{font-size:1.1rem; line-height:1.8; margin-bottom:1rem; color:var(--ink)}

/* COUNTDOWN CHIPS */
.countdown{display:flex; gap:14px; flex-wrap:wrap; justify-content:center; margin:.55rem 0 1.25rem}
.cd{position:relative; background:var(--paper); border:1px solid var(--line); border-radius:16px; padding:14px 18px; min-width:88px; text-align:center; box-shadow:0 8px 18px rgba(0,0,0,.06)}
.cd::after{content:""; position:absolute; inset:0; border-radius:inherit; box-shadow:inset 0 1px 0 rgba(255,255,255,.06); pointer-events:none}
.cd-val{display:block; font-weight:900; font-size:1.8rem; color:var(--ink)}
.cd-lab{display:block; font-size:.86rem; color:var(--sub)}
.actions{display:flex; gap:12px; flex-wrap:wrap; justify-content:center}
.btn{display:inline-flex; align-items:center; gap:8px; text-decoration:none; font-weight:800; padding:12px 18px; border-radius:14px; border:1px solid var(--line); background:var(--paper); color:var(--ink); box-shadow:0 2px 6px rgba(0,0,0,.05); transition:transform .2s ease, filter .2s ease}
.btn.primary{background:linear-gradient(135deg,var(--pri),var(--pri2)); border:none; color:#fff; box-shadow:0 6px 18px rgba(0,122,255,.25)}
.btn:hover{transform:translateY(-2px); filter:brightness(.97)}

/* ===== LETTER SECTION ===== */
.letter-block{margin-top:clamp(22px,3vw,30px); border-top:1px solid var(--line); padding-top:clamp(16px,2.2vw,24px);
  display:none; max-height:0; opacity:0; transform:translateY(12px);
  transition:max-height .7s ease, opacity .45s ease, transform .45s ease}
.letter-card{background:var(--paper); border:1px solid var(--line); border-radius:20px; box-shadow:0 12px 28px rgba(0,0,0,.07);
  padding:clamp(22px,2.6vw,32px); position:relative; overflow:hidden}
/* court corner deco */
.letter-card::after{
  content:""; position:absolute; right:-88px; bottom:-88px; width:300px; height:300px; border-radius:28px; transform:rotate(10deg);
  background:
   linear-gradient(0deg, transparent calc(50% - 2px), rgba(255,255,255,.28) calc(50% - 2px), rgba(255,255,255,.28) calc(50% + 2px), transparent calc(50% + 2px)),
   linear-gradient(90deg, transparent calc(50% - 2px), rgba(255,255,255,.28) calc(50% - 2px), rgba(255,255,255,.28) calc(50% + 2px), transparent calc(50% + 2px)),
   linear-gradient(135deg, color-mix(in srgb, var(--court) 16%, transparent), transparent);
  box-shadow:inset 0 0 0 4px rgba(255,255,255,.06), inset 0 0 0 12px rgba(255,255,255,.04)
}

.letter-title{margin:0 0 12px; font-size:.92rem; color:var(--sub); font-weight:900; letter-spacing:.12em; text-transform:uppercase; display:flex; align-items:center; gap:10px}
.letter-title svg{opacity:.75}
.hairline{height:1px; background:var(--line); margin:10px 0 18px}

.letter-body{font-size:1.12rem; line-height:1.95; color:var(--ink)}
.letter-body p{margin:0 0 1.02rem}
.letter-body p:last-of-type{color:var(--sub)}
.line{opacity:0; transform:translateY(7px); transition:.36s ease}

/* ===== FLOATING TENNIS BALLS ===== */
.ball{position:absolute; width:28px; height:28px; border-radius:50%; background:
  radial-gradient(circle at 30% 30%, #fff8, transparent 55%),
  linear-gradient(180deg, var(--ball), var(--ball-d));
  box-shadow:0 4px 12px rgba(0,0,0,.18)}
.ball:after,.ball:before{content:""; position:absolute; inset:0; border-radius:inherit; border:3px solid #fff; border-top-color:transparent; border-bottom-color:transparent; opacity:.9; transform:rotate(25deg)}
@keyframes floatA{0%{transform:translateY(0) translateX(0) rotate(0)} 50%{transform:translateY(-18px) translateX(6px) rotate(8deg)} 100%{transform:translateY(0) translateX(0) rotate(0)}}
@keyframes floatB{0%{transform:translateY(0) translateX(0) rotate(0)} 50%{transform:translateY(-12px) translateX(-6px) rotate(-8deg)} 100%{transform:translateY(0) translateX(0) rotate(0)}}
.ball.b1{ top:-14px; left:18px; animation:floatA 6s ease-in-out infinite }
.ball.b2{ top:42%; right:-14px; animation:floatB 7s ease-in-out infinite }
.ball.b3{ bottom:-14px; left:50%; animation:floatA 5.5s ease-in-out infinite }

/* ===== PARALLAX RACKET ===== */
.racket{position:absolute; width:min(240px,28vw); right:-60px; top:-50px; opacity:.18; transform:rotate(20deg); filter:drop-shadow(0 18px 24px rgba(0,0,0,.18)); transition:transform .2s ease}
.card:hover .racket{transform:rotate(18deg) translateY(-4px)}
.racket path.str{stroke:color-mix(in srgb, var(--pri) 60%, #000); opacity:.5}

/* ===== STATE ===== */
body.open{background:linear-gradient(160deg,#ffffff,#f2f4f8)}
body.open .hero-block{transform:scale(.975); opacity:.97}
body.open .letter-block{display:block; opacity:1; transform:none}

/* ===== REDUCED MOTION ===== */
@media (prefers-reduced-motion:reduce){
  *{animation:none !important; transition:none !important}
}

/* ===== RESPONSIVE ===== */
@media(max-width:560px){
  .title{font-size:clamp(28px,7vw,44px)}
  .letter-body{font-size:1.04rem; line-height:1.86}
  .btn{font-size:.95rem; padding:11px 16px}
}
</style>
</head>
<body>

<!-- Background waves -->
<div class="bg-waves" aria-hidden="true">
  <svg viewBox="0 0 1440 800" preserveAspectRatio="none">
    <defs>
      <linearGradient id="g1" x1="0" y1="0" x2="1" y2="0">
        <stop offset="0%" stop-color="var(--pri)" stop-opacity=".18"/>
        <stop offset="100%" stop-color="var(--pri2)" stop-opacity=".18"/>
      </linearGradient>
    </defs>
    <path d="M0,200 C240,140 360,160 540,190 C720,220 840,140 1020,160 C1200,180 1320,160 1440,120 L1440,0 L0,0 Z" fill="url(#g1)"/>
    <path d="M0,420 C220,360 360,400 520,440 C740,500 920,420 1120,450 C1280,474 1380,460 1440,450 L1440,0 L0,0 Z" fill="url(#g1)" opacity=".6"/>
  </svg>
</div>
<div class="bg-stars" aria-hidden="true"></div>

<section class="stage">
  <article class="card">
    <!-- parallax racket -->
    <svg class="racket" viewBox="0 0 256 256" fill="none" aria-hidden="true">
      <ellipse cx="110" cy="86" rx="86" ry="70" stroke="currentColor" opacity=".45" stroke-width="8"/>
      <path class="str" d="M42 56L178 116M42 76L178 136M42 96L178 156M62 40L122 176M82 40L142 176" stroke-width="2"/>
      <rect x="105" y="150" width="22" height="70" rx="10" fill="currentColor" opacity=".25"/>
    </svg>

    <!-- top ribbon -->
    <div class="ribbon">
      <span></span>
      <div class="crest" aria-hidden="true">
        <svg width="30" height="30" viewBox="0 0 24 24">
          <path d="M5 5l6 6M19 5l-6 6" stroke="#2b7fff" stroke-width="1.6" stroke-linecap="round"/>
          <path d="M8.5 9.5c2 2 1.5 4.5 0 6s-4 2-6 0 0-4 1.5-5.5 3.5-2.5 4.5-.5Z" stroke="#00c896" stroke-width="1.4"/>
          <circle cx="12" cy="12" r="1.2" fill="var(--ball)" />
        </svg>
      </div>
      <span>Invitation</span>
      <span></span>
    </div>

    {% block content %}{% endblock %}
  </article>
</section>

<!-- floating tennis balls -->
<div class="ball b1" aria-hidden="true"></div>
<div class="ball b2" aria-hidden="true"></div>
<div class="ball b3" aria-hidden="true"></div>

<script>
/* ===== LETTER OPEN TRIGGER ===== */
const letterBlock = document.getElementById('letterBlock');
const heroBlock = document.querySelector('.hero-block');

function openLetter(){
  if(document.body.classList.contains('open')) return;
  document.body.classList.add('open');
  requestAnimationFrame(()=>{
    letterBlock.style.maxHeight = letterBlock.scrollHeight + 'px';
    document.querySelectorAll('#letterBody .line').forEach((el,i)=>{
      el.style.transitionDelay = (i*38)+'ms';
      el.style.opacity = 1; el.style.transform = 'none';
    });
    confetti(420); // celebration 🎉
  });
}
const io = new IntersectionObserver((ents)=>{
  ents.forEach(e=>{ if(e.isIntersecting){ openLetter(); io.disconnect(); } });
},{root:null, threshold:0.05, rootMargin:"-42% 0px -42% 0px"});
if(heroBlock && letterBlock) io.observe(heroBlock);

window.addEventListener('resize',()=>{
  if(document.body.classList.contains('open')){
    letterBlock.style.maxHeight = letterBlock.scrollHeight + 'px';
  }
});

/* ===== LIGHT CONFETTI ===== */
function confetti(count){
  const reduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  if(reduced) return;
  const colors = ['#ffcc00','#00c896','#007aff','#ff375f'];
  for(let i=0;i<count;i++){
    const el = document.createElement('i');
    el.style.position='fixed';
    el.style.left = (Math.random()*100)+'vw';
    el.style.top = '-2vh';
    el.style.width = el.style.height = (4 + Math.random()*6)+'px';
    el.style.background = colors[i % colors.length];
    el.style.borderRadius = Math.random()>.5 ? '50%' : '2px';
    el.style.opacity = .9;
    el.style.transform = `rotate(${Math.random()*360}deg)`;
    el.style.pointerEvents='none';
    el.style.zIndex=999;
    document.body.appendChild(el);
    const dx = (Math.random()*2-1)*20; const dur = 5+Math.random()*3;
    el.animate([
      { transform:el.style.transform, offset:0 },
      { transform:`translate(${dx}vw, 92vh) rotate(${360+Math.random()*360}deg)`, offset:1 }
    ], { duration: dur*1000, easing: 'cubic-bezier(.22,.61,.36,1)' }).finished.then(()=>el.remove());
  }
}

/* ===== PARALLAX RACKET ===== */
const racket = document.querySelector('.racket');
document.addEventListener('mousemove', (e)=>{
  if(!racket) return;
  const x = (e.clientX / window.innerWidth - .5) * 6;
  const y = (e.clientY / window.innerHeight - .5) * 6;
  racket.style.transform = `rotate(${20 + x}deg) translate(${x*2}px, ${y*2}px)`;
});
</script>

</body>
</html>
